&!:uc1

# Create project breakdown &!breakdown
- Must support defining a tree of subtasks as AMP tags
	- [x] Join relative defs into absolute defs
		- [x] Use rubr.tree.Tree to store Nodes
		- [x] Add parent backlinks
		- [x] Represent Folders, Files and Nodes in a tree
		- [x] Join Folders and Files
		- [x] Add AMPs from first line to File
- Describe these subtasks in Markdown
- List project breakdown from CLI
	- [x] Filter-out tags that do not match
		- Update rubr.fuzz
	- [x] Sort by fuzzy match score
- [ ] Add 'fix' mode to champ
	- [ ] Warn on amps without definition

# Search for AMP defs and tags from editor &!define
- [x] Must support [[Helix]] via [[Language Server Protocol (LSP)]]
	- [x] Use workspace symbols
- [x] Search in amp.Path, not in terms
	- [x] Create seperate AMPs
	- [x] Resolve AMP tags against defs
		- Node.orgs must always be resolved
		- [x] First might be def
		- [x] Remove Node.def
		- [x] Resolve amps into Node.orgs
			- [x] Create flat list of defs as part of joinDefs()
			- [x] Report doubles via log
				- [x] Impl 'amp.Path.is_fit()'
			- [x] Dfs over tree
				- [x] Parse each amp
				- [x] Resolve non-defs and append
				- [x] Report relative amps that cannot be resolved
				- [x] Report ambiguous fits
	- [x] Make LSP search in Node.orgs
		- [x] Document symbols
			- [x] Create string repr
		- [x] Workspace symbols
	- [ ] Open Jira URL
		- Support `~id` template
			- `&!:~id=a3denc$,url=https://auro-3d.atlassian.net/browse/A3DENC-$`
			- LSP's 'goto definition' must open the URL as well
			- Match against templates after other matches fail
- [x] Search smart-case
	- Impl in rubr.fuzz based on casing of needle
- [x] Reload when file is changed/created
- [x] Allow ambiguous resolving when only a single match is found within its own Grove
- Support searching for next Chore to execute
	- [x] Interpret '[?]' as AMP
		- Discriminate between Markdown and Wiki links
		- [ ] Support for Markdown titles as well
	- [ ] Create DSL for 'todo', 'wip' and 'next'
		- Use the same marker as for Checkbox AMPs
			- `.`: all
			- ` `: todo
			- `x`: done
			- `/`: wip
			- `*`: next
			- `>`: fwd
		- [x] Support `~status` template
		- [x] Check [Tasks.md](https://tasks.md/)
		- [x] Support `TODO` and other capital-based annotations, see [todo-comments](https://github.com/folke/todo-comments.nvim)
			- [x] For Markdown, Txt and SourceCode
- [x] Support searching for unresolved AMPs
	- [x] Add catch-all AMP '?'
	- [ ] Make this configurable
- [ ] Reload from time to time
- [x] Must support specification of defaults in '~/.config/champ/config.zon#default'
	- [*] Reload when changed, check from time to time
		- Create thread that updates a mutex-protected ?Forest
		- Have the thread wait on a condition variable for some time. This can be woken when LSP indicates a file change.
		- Have each LSP iteration try and load the ?Forest
- [ ] Support searching in non-AMP data of Chore

# Annotate parts of source code with project and status tags &!annotate
- [/] Support aggregation of AMP tags
	- Rework Node.orgs
		- [x] Keep refs to defs in chores
		- [x] Use ?def, org and links (trailing!, maybe ancestral as well?)
		- [x] Collect all tags as refs to defs in Node.agg
	- [x] Tag distribution from root to leaf
		- Def is also an org and should be used in aggregation etc
			- Only for tags, not for templates or numbers etc.
	- [x] Do not inherit ~status
		- Do not inherit if there is already an AMP with the same def
	- [/] Trailing ! indicates dependency: current Chore _uses_ AMP
		- Default behavior is that current Chore _is part of_ AMP
		- Is this the same as a reverse tag?
	- [ ] Support Markdown and Wiki links to other files
		- [?] Do we need some marker to take them into account
- [ ] Support specification of AMP tags for a folder
	- Use '_tree.md'
		- Only aggregate AMP tags specified at the top
	- Rename existing '_.amp' and update Rust code
- [ ] Accept AMPs in source code comments if there is AMP data at the start

# Find all references &!search
- [x] Collect content range per Node
- [x] Convert Nodes with AMP info into Chores
	- [x] Merge Defs into chore.Chores
	- [x] Make app.Lsp symbols work with this
		- [x] Add nodes during setup of Forest
- [x] Support 'goto definition'
	- [x] Find exact AMP that is meant
		- [x] Inject AMP location from Node.line into Chores
- [x] Support 'find references'
- [x] Must filter done items by default
	- [x] Support searching all references with `.`
	- [x] Create dedicated qry.Query
- [x] Must only report nodes with an AMP tag
- [x] Must support identifying next subtasks to work on
- [ ] Support 'goto definition' for languages where an other LSP provides this func as well
	- Relay requests from champ to this other LSP if champ does not find a reference
		- [-] Develop `muxls` as a separate LSP to deal with this
	- Configure this in `~/.config/champ/config.zon` &done

- [ ] Support env var `helix_filepath` in Helix for `%sh{}` commands
	- Necessary to get 'daily' working properly
- [ ] Support annotating skill level for a Chore
- [ ] Improve fuzz searching
	- Segmented search
